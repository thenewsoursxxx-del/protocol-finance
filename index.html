<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />

  <!-- üî• –ö–õ–Æ–ß–ï–í–û–ô –ú–û–ú–ï–ù–¢: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± -->
  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1.0,
                 maximum-scale=1.0,
                 user-scalable=no,
                 viewport-fit=cover" />

  <title>Protocol</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- cache-bust -->
  <link rel="stylesheet" href="style.css?v=999">
</head>
<body>

<!-- ===== ONBOARDING ===== -->
<div id="onboarding" class="onboarding hidden">
  <div class="stories">
    <div class="story active">
      <h2>Protocol</h2>
      <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–¥–µ–Ω—å–≥–∞–º–∏ –∏ —Ü–µ–ª—è–º–∏</p>
    </div>
    <div class="story">
      <h2>–ü–ª–∞–Ω</h2>
      <p>–¢—ã –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—à—å
–≥–¥–µ —Ç—ã –∏ –∫—É–¥–∞ –∏–¥—ë—à—å</p>
    </div>
    <div class="story">
      <h2>–ö–æ–Ω—Ç—Ä–æ–ª—å</h2>
      <p>–¶–µ–ª–∏, –ø–æ–¥—É—à–∫–∞
–∏ —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
    </div>
    <div class="story">
      <button id="startApp">–ù–∞—á–∞—Ç—å</button>
    </div>
  </div>
</div>

<!-- ===== APP ===== -->
<div id="app" class="app hidden">

  <div class="screen active" id="screen-calc">
    <h2>–†–∞—Å—á—ë—Ç</h2>

    <label>–î–æ—Ö–æ–¥</label>
    <input id="income" placeholder="100.000">

    <label>–†–∞—Å—Ö–æ–¥—ã</label>
    <input id="expenses" placeholder="50.000">

    <button id="calculate">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <div id="planResult"></div>
  </div>

  <div class="screen" id="screen-progress">
    <h2>–ü—Ä–æ–≥—Ä–µ—Å—Å</h2>
    <canvas id="progressChart"></canvas>
    <div id="progressInfo"></div>
  </div>

  <div class="screen" id="screen-accounts">
    <h2>–°—á–µ—Ç–∞</h2>
    <div id="accounts"></div>
  </div>

  <div class="screen" id="screen-goals">
    <h2>–¶–µ–ª–∏</h2>
    <div id="goals"></div>

    <input id="newGoalName" placeholder="–ù–æ–≤–∞—è —Ü–µ–ª—å">
    <input id="newGoalTarget" placeholder="–°—É–º–º–∞">
    <button id="addGoal">–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</button>
  </div>

  <!-- ===== PREMIUM BOTTOM NAV ===== -->
  <div class="bottom-nav">
    <button data-screen="calc" class="nav-btn active">üìê</button>
    <button data-screen="progress" class="nav-btn">üìà</button>
    <button data-screen="accounts" class="nav-btn">üíº</button>
    <button data-screen="goals" class="nav-btn">üéØ</button>
  </div>

</div>

<script src="app.js?v=999"></script>

<script>
const seen = localStorage.getItem("onboarding_seen");
if (!seen) {
  onboarding.classList.remove("hidden");
  let i = 0;
  const stories = document.querySelectorAll(".story");

  onboarding.onclick = () => {
    if (i < stories.length - 1) {
      stories[i].classList.remove("active");
      stories[++i].classList.add("active");
    }
  };

  startApp.onclick = e => {
    e.stopPropagation();
    localStorage.setItem("onboarding_seen", "1");
    onboarding.classList.add("hidden");
    app.classList.remove("hidden");
  };
} else {
  app.classList.remove("hidden");
}
</script>

</body>
</html>